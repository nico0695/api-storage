{
  "info": {
    "name": "API Storage - Backblaze B2",
    "_postman_id": "api-storage-collection",
    "description": "Collection for API Storage endpoints - File management with Backblaze B2",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Health",
      "item": [
        {
          "name": "Health Check",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/health",
              "host": ["{{baseUrl}}"],
              "path": ["health"]
            },
            "description": "Check if the API is running and healthy"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Files",
      "item": [
        {
          "name": "Upload File",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{apiKey}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "file",
                  "type": "file",
                  "src": [],
                  "description": "Select a file to upload"
                },
                {
                  "key": "customName",
                  "value": "My Custom File Name",
                  "type": "text",
                  "description": "Optional custom name for the file"
                },
                {
                  "key": "metadata",
                  "value": "{\"author\": \"John Doe\", \"tags\": [\"important\", \"project\"]}",
                  "type": "text",
                  "description": "Optional JSON metadata"
                }
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/files/upload",
              "host": ["{{baseUrl}}"],
              "path": ["files", "upload"]
            },
            "description": "Upload a file to Backblaze B2 storage. The file metadata will be stored in the local database."
          },
          "response": [
            {
              "name": "Success Example",
              "originalRequest": {
                "method": "POST",
                "header": [],
                "body": {
                  "mode": "formdata",
                  "formdata": [
                    {
                      "key": "file",
                      "type": "file",
                      "src": []
                    }
                  ]
                },
                "url": {
                  "raw": "{{baseUrl}}/files/upload",
                  "host": ["{{baseUrl}}"],
                  "path": ["files", "upload"]
                }
              },
              "status": "Created",
              "code": 201,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "body": "{\n  \"id\": 1,\n  \"name\": \"example.jpg\",\n  \"customName\": \"My Custom File Name\",\n  \"key\": \"1729776000000-example.jpg\",\n  \"mime\": \"image/jpeg\",\n  \"size\": 125648,\n  \"metadata\": {\"author\": \"John Doe\", \"tags\": [\"important\", \"project\"]},\n  \"createdAt\": \"2025-10-24T12:00:00.000Z\",\n  \"updatedAt\": \"2025-10-24T12:00:00.000Z\"\n}"
            }
          ]
        },
        {
          "name": "List All Files",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{apiKey}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/files",
              "host": ["{{baseUrl}}"],
              "path": ["files"]
            },
            "description": "Get a list of all uploaded files with their metadata"
          },
          "response": [
            {
              "name": "Success Example",
              "originalRequest": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/files",
                  "host": ["{{baseUrl}}"],
                  "path": ["files"]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "body": "{\n  \"files\": [\n    {\n      \"id\": 1,\n      \"name\": \"example.jpg\",\n      \"customName\": \"My Custom File Name\",\n      \"key\": \"1729776000000-example.jpg\",\n      \"mime\": \"image/jpeg\",\n      \"size\": 125648,\n      \"metadata\": {\"author\": \"John Doe\", \"tags\": [\"important\", \"project\"]},\n      \"createdAt\": \"2025-10-24T12:00:00.000Z\",\n      \"updatedAt\": \"2025-10-24T12:00:00.000Z\"\n    },\n    {\n      \"id\": 2,\n      \"name\": \"document.pdf\",\n      \"customName\": null,\n      \"key\": \"1729776100000-document.pdf\",\n      \"mime\": \"application/pdf\",\n      \"size\": 456789,\n      \"metadata\": null,\n      \"createdAt\": \"2025-10-24T12:05:00.000Z\",\n      \"updatedAt\": \"2025-10-24T12:05:00.000Z\"\n    }\n  ]\n}"
            }
          ]
        },
        {
          "name": "Get File Details",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{apiKey}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/files/:id",
              "host": ["{{baseUrl}}"],
              "path": ["files", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": "1",
                  "description": "File ID to retrieve"
                }
              ]
            },
            "description": "Get detailed information about a specific file including a download URL"
          },
          "response": [
            {
              "name": "Success Example",
              "originalRequest": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/files/1",
                  "host": ["{{baseUrl}}"],
                  "path": ["files", "1"]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "body": "{\n  \"id\": 1,\n  \"name\": \"example.jpg\",\n  \"customName\": \"My Custom File Name\",\n  \"key\": \"1729776000000-example.jpg\",\n  \"mime\": \"image/jpeg\",\n  \"size\": 125648,\n  \"metadata\": {\"author\": \"John Doe\", \"tags\": [\"important\", \"project\"]},\n  \"createdAt\": \"2025-10-24T12:00:00.000Z\",\n  \"updatedAt\": \"2025-10-24T12:00:00.000Z\",\n  \"downloadUrl\": \"https://s3.us-east-005.backblazeb2.com/fyou-storage/1729776000000-example.jpg?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=...\"\n}"
            },
            {
              "name": "Not Found Example",
              "originalRequest": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/files/999",
                  "host": ["{{baseUrl}}"],
                  "path": ["files", "999"]
                }
              },
              "status": "Not Found",
              "code": 404,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "body": "{\n  \"error\": \"File not found\"\n}"
            }
          ]
        },
        {
          "name": "Delete File",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{apiKey}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/files/:id",
              "host": ["{{baseUrl}}"],
              "path": ["files", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": "1",
                  "description": "File ID to delete"
                }
              ]
            },
            "description": "Delete a file from both Backblaze B2 storage and the local database"
          },
          "response": [
            {
              "name": "Success Example",
              "originalRequest": {
                "method": "DELETE",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/files/1",
                  "host": ["{{baseUrl}}"],
                  "path": ["files", "1"]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "body": "{\n  \"message\": \"File deleted successfully\"\n}"
            },
            {
              "name": "Not Found Example",
              "originalRequest": {
                "method": "DELETE",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/files/999",
                  "host": ["{{baseUrl}}"],
                  "path": ["files", "999"]
                }
              },
              "status": "Not Found",
              "code": 404,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "body": "{\n  \"error\": \"File not found\"\n}"
            }
          ]
        }
      ]
    }
  ],
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:4000",
      "type": "string"
    },
    {
      "key": "apiKey",
      "value": "your_api_key_here",
      "type": "string"
    }
  ]
}
